# Nixpacks config for Dokploy deployment
# Use npm (not bun) in the container to avoid arch issues (exit 132) on some hosts.
# NIXPACKS=1 makes Astro use the Node adapter (standalone server).

[phases.install]
cmds = ["npm install"]

[phases.build]
cmds = ["NIXPACKS=1 npm run build"]

[start]
cmd = "node ./dist/server/entry.mjs"
